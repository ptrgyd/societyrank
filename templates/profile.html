{% extends "layout.html" %}

{% block content %}

<span style="color:;"><h3>Welcome to the profile page of <span style="font-family:courier;font-weight:100;background-color:palegreen;">&nbsp;{{person.nickname}}&nbsp;</span></h3></span><br />

<table style="vertical-align:bottom;max-width:;">
<tr><td style="width:;"><span style="font-family:monospace;">scientific name:&nbsp;</span></td><td><i>{{person.genus}} {{person.species}}</i></td></tr>
<tr><td><span style="font-family:monospace;">&nbsp;&nbsp;&nbsp;&nbsp;common name:&nbsp;</span></td><td>{{person.firstname}} {{person.lastname}}</td></tr>
{% if not person.descrip == None %}
<tr>
<td><span style="font-family:monospace;">&nbsp;&nbsp;&nbsp;&nbsp;description:&nbsp;</span></td>
<td style="max-width:400px;">{{person.descrip}}</td>
</tr>
{% endif %}

<tr><td></td><td><br />
  {% if not full == None %}
  <div style="margin-bottom:8px;"><a href="{{url_for('profile',person_id=person_id)}}" style="font-style:italic;">see less</a></div>
  {% endif %}
  <span style="font-family:monospace;background-color:gainsboro;font-size:9px;">

  <span style="background-color:lime;">
  {% for n in range( (( person.score / 10 )|round)|int - 40 ) %}&nbsp;{% endfor %}{{person.score}}</span><br />

  {% for x in scorehistory %}
  {% for i in range( (( x.score / 10 )|round)|int - 40 ) %}&nbsp;{% endfor %}{{ x.score }}<br />
  {% endfor %}
  <br />
  </span>
  {% if full == None %}
  <a href="{{url_for('profile',person_id=person_id,full='full')}}" style="font-style:italic;">see full score history?</a><br />
  <br />
  {% endif %}

</td></tr>

</table>
<br />

{% if current_user.is_anonymous == False and current_user.person_id != person_id|int %}
  {% if current_user.comments_left > 0 %}
  Leave an anonymous comment&#128527; You have {{current_user.comments_left}} left.<br />
      <form action="" method="post">
          {{ commentbox.hidden_tag() }}
          {{ commentbox.comment(cols="60",rows="5",maxlength="280") }}
          {% for x in commentbox.comment.errors %}
          <br /><span style="color:red;background-color:floralwhite;">{{ x }}</span>
          {% endfor %}
          <input type="hidden" value="just a spacer" /><br />
          {{ commentbox.submit }}
      </form>
  {% else %}
  <span style="background-color:yellow;">No more comments for you!!</span>
  <br />
  {% endif %}
<br />
{% endif %}

{% if comments == [] %}
  <span style="background-color:yellow;">Aww, no comments yet.</span>
{% else %}
  {% for comment in comments %}
  submitted <span style="color:red;font-style:italic;">{{ moment(comment.sub_time).fromTime(current_time) }}</span><br />
  <!-- {{ moment(comment.sub_time).calendar() }}<br />
  {{ moment(comment.sub_time).format('MMMM Do YYYY, h:mm:ss a') }}<br /> -->
  <div style="background-color:;max-width:390px;padding:0 0 0 0;font-family:monospace;">{{comment.comment}}</div><br />
  {% endfor %}
{% endif %}




{% endblock %}
